{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 25, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/app/meals/[id]/page.module.css [app-rsc] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"creator\": \"page-module__xzwF5W__creator\",\n  \"fade-slide-in-from-bottom\": \"page-module__xzwF5W__fade-slide-in-from-bottom\",\n  \"fade-slide-in-from-left\": \"page-module__xzwF5W__fade-slide-in-from-left\",\n  \"fade-slide-in-from-right\": \"page-module__xzwF5W__fade-slide-in-from-right\",\n  \"flash\": \"page-module__xzwF5W__flash\",\n  \"header\": \"page-module__xzwF5W__header\",\n  \"headerText\": \"page-module__xzwF5W__headerText\",\n  \"image\": \"page-module__xzwF5W__image\",\n  \"instructions\": \"page-module__xzwF5W__instructions\",\n  \"loading\": \"page-module__xzwF5W__loading\",\n  \"summary\": \"page-module__xzwF5W__summary\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///Users/stco/personal/nextjs-maxmiller/meals-app/lib/meals.js"],"sourcesContent":["import sql from 'better-sqlite3';\nimport slugify from 'slugify';\nimport xss from 'xss';\nimport fs from 'fs';\n\nconst db = sql('meals.db');\n\n\n\nexport async function getMeals() {\n    await new Promise(resolve => setTimeout(resolve, 5000));\n    // throw new Error('Something went wrong');\n    return db.prepare('SELECT * FROM meals').all();\n}\n\nexport function getMealById(id) {\n    return db.prepare('SELECT * FROM meals WHERE slug = ?').get(id);\n}\n\nexport async function saveMeal(meal) {\n    meal.slug = slugify(meal.title, { lower: true });\n    meal.instructions = xss(meal.instructions);\n\n\n    const extension = meal.image.name.split('.').pop();\n    const filename = meal.slug + \".\" + extension;\n    const path = \"public/images/\" + filename;\n    const file = fs.createWriteStream(path);\n    const bufferedImage = await meal.image.arrayBuffer();\n    file.write(Buffer.from(bufferedImage));\n    file.end();\n    meal.image = \"/images/\" + filename;\n\n\n    const insert = db.prepare('INSERT INTO meals (slug, title, summary, instructions, creator, creator_email, image) VALUES (?, ?, ?, ?, ?, ?, ?)');\n    insert.run(meal.slug,\n        meal.title,\n        meal.summary,\n        meal.instructions,\n        meal.creator,\n        meal.creatorEmail,\n        meal.image);\n}"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;;;;;AAEA,MAAM,KAAK,IAAA,sIAAG,EAAC;AAIR,eAAe;IAClB,MAAM,IAAI,QAAQ,CAAA,UAAW,WAAW,SAAS;IACjD,2CAA2C;IAC3C,OAAO,GAAG,OAAO,CAAC,uBAAuB,GAAG;AAChD;AAEO,SAAS,YAAY,EAAE;IAC1B,OAAO,GAAG,OAAO,CAAC,sCAAsC,GAAG,CAAC;AAChE;AAEO,eAAe,SAAS,IAAI;IAC/B,KAAK,IAAI,GAAG,IAAA,6IAAO,EAAC,KAAK,KAAK,EAAE;QAAE,OAAO;IAAK;IAC9C,KAAK,YAAY,GAAG,IAAA,8IAAG,EAAC,KAAK,YAAY;IAGzC,MAAM,YAAY,KAAK,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG;IAChD,MAAM,WAAW,KAAK,IAAI,GAAG,MAAM;IACnC,MAAM,OAAO,mBAAmB;IAChC,MAAM,OAAO,wGAAE,CAAC,iBAAiB,CAAC;IAClC,MAAM,gBAAgB,MAAM,KAAK,KAAK,CAAC,WAAW;IAClD,KAAK,KAAK,CAAC,OAAO,IAAI,CAAC;IACvB,KAAK,GAAG;IACR,KAAK,KAAK,GAAG,aAAa;IAG1B,MAAM,SAAS,GAAG,OAAO,CAAC;IAC1B,OAAO,GAAG,CAAC,KAAK,IAAI,EAChB,KAAK,KAAK,EACV,KAAK,OAAO,EACZ,KAAK,YAAY,EACjB,KAAK,OAAO,EACZ,KAAK,YAAY,EACjB,KAAK,KAAK;AAClB"}},
    {"offset": {"line": 99, "column": 0}, "map": {"version":3,"sources":["file:///Users/stco/personal/nextjs-maxmiller/meals-app/app/meals/%5Bid%5D/page.js"],"sourcesContent":["import React from 'react'\nimport classes from './page.module.css'\nimport Image from 'next/image'\nimport { getMealById } from '@/lib/meals';\nimport { notFound } from 'next/navigation';\n\n// this is a function to generate metadata for the page\n// this function will be called when the page is generated and the function name should always be the same generateMetadata\n// this also gets access to params same as the params we get in the page function\nexport async function generateMetadata({ params }) {\n  const mealId = await params;\n  const meal = getMealById(mealId?.id);\n  if (!meal) {\n    return {\n      title: 'Meal not found',\n      description: 'Meal not found'\n    }\n  }\n  return {\n    title: meal?.title,\n    description: meal?.summary\n  }\n}\n\nconst MealsDetailPage = async ({ params }) => {\n  const mealId = await params;\n  const meal = getMealById(mealId?.id);\n\n  if (!meal) {\n    // this is a server-side function to show a 404 page\n    notFound()\n  }\n\n  return (\n    <>\n      <header className={classes.header}>\n        <div className={classes.image}>\n          <Image fill src={meal.image} alt={meal.title} />\n        </div>\n\n        <div className={classes.headerText}>\n          <h1>{meal.title}</h1>\n          <p className={classes.creator}>by <a href={`mailto:${meal.creatorEmail}`}>{meal.creator}</a></p>\n          <p className={classes.summary}>{meal.summary}</p>\n        </div>\n      </header>\n      <main>\n        <p className={classes.instructions} dangerouslySetInnerHTML={{\n          __html: `${meal.instructions}`\n        }}></p>\n      </main>\n    </>\n  )\n}\n\nexport default MealsDetailPage"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AAAA;;;;;;;AAKO,eAAe,iBAAiB,EAAE,MAAM,EAAE;IAC/C,MAAM,SAAS,MAAM;IACrB,MAAM,OAAO,IAAA,2HAAW,EAAC,QAAQ;IACjC,IAAI,CAAC,MAAM;QACT,OAAO;YACL,OAAO;YACP,aAAa;QACf;IACF;IACA,OAAO;QACL,OAAO,MAAM;QACb,aAAa,MAAM;IACrB;AACF;AAEA,MAAM,kBAAkB,OAAO,EAAE,MAAM,EAAE;IACvC,MAAM,SAAS,MAAM;IACrB,MAAM,OAAO,IAAA,2HAAW,EAAC,QAAQ;IAEjC,IAAI,CAAC,MAAM;QACT,oDAAoD;QACpD,IAAA,iMAAQ;IACV;IAEA,qBACE;;0BACE,8OAAC;gBAAO,WAAW,qJAAO,CAAC,MAAM;;kCAC/B,8OAAC;wBAAI,WAAW,qJAAO,CAAC,KAAK;kCAC3B,cAAA,8OAAC,wIAAK;4BAAC,IAAI;4BAAC,KAAK,KAAK,KAAK;4BAAE,KAAK,KAAK,KAAK;;;;;;;;;;;kCAG9C,8OAAC;wBAAI,WAAW,qJAAO,CAAC,UAAU;;0CAChC,8OAAC;0CAAI,KAAK,KAAK;;;;;;0CACf,8OAAC;gCAAE,WAAW,qJAAO,CAAC,OAAO;;oCAAE;kDAAG,8OAAC;wCAAE,MAAM,CAAC,OAAO,EAAE,KAAK,YAAY,EAAE;kDAAG,KAAK,OAAO;;;;;;;;;;;;0CACvF,8OAAC;gCAAE,WAAW,qJAAO,CAAC,OAAO;0CAAG,KAAK,OAAO;;;;;;;;;;;;;;;;;;0BAGhD,8OAAC;0BACC,cAAA,8OAAC;oBAAE,WAAW,qJAAO,CAAC,YAAY;oBAAE,yBAAyB;wBAC3D,QAAQ,GAAG,KAAK,YAAY,EAAE;oBAChC;;;;;;;;;;;;;AAIR;uCAEe"}}]
}